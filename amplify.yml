# AWS Amplify Monorepo Configuration
# This file configures Amplify to deploy only the frontend from this monorepo
version: 1
applications:
  - appRoot: frontend  # Points to the frontend directory in the monorepo
    env:
      variables:
        # Environment variables are set in Amplify Console, not here
        # Required: VITE_API_BASE_URL (set in Amplify Console â†’ Environment variables)
    frontend:
      phases:
        preBuild:
          commands:
            # Use --legacy-peer-deps to handle React 19 peer dependency conflicts
            - npm install --legacy-peer-deps
        build:
          commands:
            - npm run build
      artifacts:
        baseDirectory: dist  # Vite outputs to dist folder
        files:
          - '**/*'
      cache:
        paths:
          - node_modules/**/*
